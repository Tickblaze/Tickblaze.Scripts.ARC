<ResourceDictionary
    mc:Ignorable="d"
	xmlns:system="clr-namespace:System;assembly=mscorlib"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:common="clr-namespace:Tickblaze.Scripts.Arc.Common"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">
	<ResourceDictionary.MergedDictionaries>
		<x:Static Member="common:ResourceDictionaries.BaseResources" />
	</ResourceDictionary.MergedDictionaries>
	
	<system:Double x:Key="MenuHeaderTextMinWidth">150.0</system:Double>
	<system:Double x:Key="MenuHeaderTextMaxWidth">200.0</system:Double>
	<system:Double x:Key="MenuHeaderParameterMinWidth">75.0</system:Double>
	<system:Double x:Key="MenuHeaderParameterMaxWidth">100.0</system:Double>

	<DataTemplate x:Key="CheckBoxMenuItemHeaderTemplate" DataType="common:CheckBoxMenuItem">
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition
					Width="Auto"
					SharedSizeGroup="Labels"
					MinWidth="{StaticResource MenuHeaderTextMinWidth}"
					MaxWidth="{StaticResource MenuHeaderTextMaxWidth}" />
				<ColumnDefinition
					Width="Auto"
					SharedSizeGroup="Parameters"
					MinWidth="{StaticResource MenuHeaderParameterMinWidth}"
					MaxWidth="{StaticResource MenuHeaderParameterMaxWidth}" />
			</Grid.ColumnDefinitions>

			<TextBlock
				Grid.Row="0"
				Grid.Column="0"
				TextWrapping="NoWrap"
				TextTrimming="CharacterEllipsis"
				MaxWidth="{StaticResource MenuHeaderTextMaxWidth}">
				<Run Text="{Binding HeaderText, Mode=OneWay, RelativeSource={RelativeSource AncestorType=common:CheckBoxMenuItem}}" />
			</TextBlock>

			<ToggleButton
				Grid.Row="0"
				Grid.Column="1"
				Style="{DynamicResource ToggleButtonOnOffStyle}"
				IsChecked="{Binding IsOn, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=common:CheckBoxMenuItem}}" />
		</Grid>
	</DataTemplate>

	<Style TargetType="MenuItem" BasedOn="{StaticResource MahApps.Styles.MenuItem}">
		<Setter Property="Margin" Value="0" />
		<Setter Property="MinHeight" Value="20" />
		<Style.Triggers>
			<Trigger Property="MenuItem.Role" Value="TopLevelHeader">
				<Setter Property="Padding" Value="{DynamicResource DoubleHorizontalThickness}" />
			</Trigger>
			<Trigger Property="MenuItem.Role" Value="TopLevelItem">
				<Setter Property="Padding" Value="{DynamicResource DoubleHorizontalThickness}" />
			</Trigger>
			<Trigger Property="MenuItem.Role" Value="SubmenuHeader">
				<Setter Property="Padding" Value="{DynamicResource DoubleHorizontalThickness}" />
			</Trigger>
			<Trigger Property="MenuItem.Role" Value="SubmenuItem">
				<Setter Property="Padding" Value="{DynamicResource DoubleHorizontalThickness}" />
			</Trigger>
		</Style.Triggers>
	</Style>

	<Style TargetType="common:CheckBoxMenuItem" BasedOn="{StaticResource {x:Type MenuItem}}">
		<Setter Property="HorizontalAlignment" Value="Left" />
		<!--<Setter Property="Header" Value="{Binding ., RelativeSource={RelativeSource Self}}" />-->
		<Setter Property="HeaderTemplate" Value="{StaticResource CheckBoxMenuItemHeaderTemplate}" />
	</Style>
</ResourceDictionary>